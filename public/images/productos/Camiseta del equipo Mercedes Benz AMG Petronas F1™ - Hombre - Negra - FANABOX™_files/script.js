(()=>{var e={22858:e=>{e.exports=function(e){if(Array.isArray(e))return e}},23646:e=>{e.exports=function(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}},59713:e=>{e.exports=function(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}},46860:e=>{e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},13884:e=>{e.exports=function(e,r){var t=[],n=!0,o=!1,i=void 0;try{for(var c,a=e[Symbol.iterator]();!(n=(c=a.next()).done)&&(t.push(c.value),!r||t.length!==r);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return t}},80521:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},98206:e=>{e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},63038:(e,r,t)=>{var n=t(22858),o=t(13884),i=t(80521);e.exports=function(e,r){return n(e)||o(e,r)||i()}},319:(e,r,t)=>{var n=t(23646),o=t(46860),i=t(98206);e.exports=function(e){return n(e)||o(e)||i()}}},r={};function t(n){var o=r[n];if(void 0!==o)return o.exports;var i=r[n]={exports:{}};return e[n](i,i.exports,t),i.exports}t.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},t.d=(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),(()=>{"use strict";var e=t(63038),r=t.n(e),n=t(59713),o=t.n(n),i=t(319),c=t.n(i);function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach((function(r){o()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var u="_bundle_price",p="_original_bundle_price";function s(){for(var e,r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];(e=console).log.apply(e,["BB"].concat(t))}function f(e,r,t){var n=document.createElement("input");n.type="hidden",n.name=e,n.value=r,t.appendChild(n)}function d(e){var r=!1,t=e.querySelector('[name="_cart"]');if(t)if(JSON.parse(t.value).items.forEach((function(e){e.properties&&void 0!==e.properties._bundle_price&&(r=!0)})),r){var n="/apps/bundles",o=e.querySelector("#bb_proxy_prefix");o&&(n=o.value),(o=document.querySelector("#bb_proxy_prefix"))&&(n=o.value);var i="".concat(n,"/cart"),a=e.querySelectorAll('[name="checkout"]');a.length>0?c()(a).forEach((function(e){e.setAttribute("formaction",i),s("Checkout button action changed to",i)})):(e.action=i,s("Form action changed to",i))}else s("No bundle in cart");else s("BB manual installation not performed")}function y(e){d(e),document.body.appendChild(e),e.submit()}function b(e){e.preventDefault();var r=document.createElement("form");r.action="/checkout",r.method="POST",r.style.display="none!important",f("_shop",window.Shopify?window.Shopify.shop:window.location.hostname,r);var t=document.querySelector('[name="_cart"]');t?(r.appendChild(t.cloneNode(!0)),y(r)):function(e){var r=new XMLHttpRequest;r.open("GET","/cart.json",!0),r.onloadend=function(){r.status<400?(f("_cart",r.responseText,e),y(e)):(console.error("Unable to fetch cart",r.readyState,r.status),window.location.href="/checkout")},r.send(null)}(r)}var v=function(){var e=c()(document.querySelectorAll('form[action$="/cart"],form[action="/checkout"]'));e.length>0?e.forEach(d):s("BB: there is no cart form");var r=c()(document.querySelectorAll("[data-bb-checkout]"));r.length>0&&r.forEach((function(e){e.addEventListener("click",b,!0)}))};document.addEventListener("load",v),window.bbCheckCart=v,window.bbProcessCart=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="".concat(u,"-").concat(e.currency),o="".concat(p,"-").concat(e.currency),i=0,c=0,a=0;return e.cart_level_discount_applications&&(a=e.cart_level_discount_applications.map((function(e){return e.total_allocated_amount})).reduce((function(e,r){return e+r}),0)),l(l({},e),{},{items:e.items.map((function(e){var a=l(l({},e),{},{properties:{}});return Object.entries(e.properties||{}).forEach((function(e){var o=r()(e,2),i=o[0],c=o[1];i!==u&&i!==n||(a.price=c,a.final_price=a.price,a.line_price=a.price*a.quantity,a.final_line_price=a.line_price,a.original_price=a.price,a.original_line_price=a.line_price,a.discounted_price=a.price),"_"===i[0]&&t||(a.properties[i]=c)})),Object.entries(e.properties||{}).forEach((function(e){var t=r()(e,2),n=t[0],i=t[1];n!==p&&n!==o||(a.original_price=i,a.original_line_price=a.original_price*a.quantity)})),i+=a.line_price,c+=a.original_line_price,a})),items_subtotal_price:i,total_price:i-a,original_total_price:c})},v()})()})();
//# sourceMappingURL=script-29cd8c3234213624fdaf.js.map